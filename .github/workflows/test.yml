# testing all notebooks
name: Testing notebooks

on:
  - push

jobs:
  test:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        notebook: [ Ch02-statlearn-lab.ipynb,
                    Ch03-linreg-lab.ipynb]


    steps:
    - uses: actions/checkout@v4

    - name: Install uv
      uses: astral-sh/setup-uv@v4
      with:
        version: "0.5.11"
        #enable-cache: 'true'
        #cache-local-path: '/tmp/cache'
        #cache-dependency-glob: 'uv.lock'


    - name: Set up Python
      shell: bash
      run: make install #uv python install ${{ inputs.python-version || '3.12' }}

    #- name: Install the project
    #  shell: bash
    #  run: |
    #    uv pip install -r requirements.txt

    - name: Test
      shell: bash
      run: |
        uv pip install pytest nbmake
        uv run pytest --nbmake ${{ matrix.notebook }}